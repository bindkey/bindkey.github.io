<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.10.0 by Michael Rose
  Copyright 2013-2018 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Firefox Problem With Xclip - El blog del tecnólogo</title>
<meta name="description" content="I’ve used both vim and neovim editors. The latter is just the newest implementation with out of the box pre-configurations.">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="El blog del tecnólogo">
<meta property="og:title" content="Firefox Problem With Xclip">
<meta property="og:url" content="https://bindkey.github.io/firefox-problem-with-xclip/">


  <meta property="og:description" content="I’ve used both vim and neovim editors. The latter is just the newest implementation with out of the box pre-configurations.">







  <meta property="article:published_time" content="2017-05-20T13:58:18-05:00">





  

  


<link rel="canonical" href="https://bindkey.github.io/firefox-problem-with-xclip/">







  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "Carlos",
      "url": "https://bindkey.github.io",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="https://bindkey.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="El blog del tecnólogo Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://bindkey.github.io/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body class="layout--post">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="https://bindkey.github.io/">El blog del tecnólogo</a>
        <ul class="visible-links">
          
            
            <li class="masthead__menu-item">
              <a href="https://bindkey.github.io/about/" >About</a>
            </li>
          
        </ul>
        
        <button class="search__toggle" type="button">
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle Menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    <div class="initial-content">
      



<div id="main" role="main">
  

  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Firefox Problem With Xclip">
    <meta itemprop="description" content="I’ve used both vim and neovim editors. The latter is just the newest implementation with out of the box pre-configurations.">
    <meta itemprop="datePublished" content="May 20, 2017">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Firefox Problem With Xclip
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  3 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>I’ve used both vim and neovim editors. The latter is just the newest implementation with out of the box pre-configurations.</p>

<p>As expected, whenever I was trying to use the copy paste command tool such as <code>xclip</code>, both vim and neovim produced the newlines on the X window system across different applications.</p>

<p>But when I set out to write an email on Gmail from Alphabet Inc., using a copy paste command tool such as <a href="https://github.com/astrand/xclip" target="_blank">xclip</a>, the process was to no avail: newlines were not being displayed on Gmail’s interface.</p>

<p>The closest match was a 2016 <a href="https://github.com/neovim/neovim/issues/4501" target="_blank">Yanking to clipboard does not preserve newlines (when pasting to some applications</a> issue that was opened but was eventually closed because the user decided to have <code>xsel</code> take care of the problem for him/her.</p>

<p>But that post raised more questions than answers.</p>

<p>There was a reference on that thread about seeing a post on unix.stackexchange.com:
<a href="http://unix.stackexchange.com/questions/164074/pasting-in-thunderbird-turns-line-breaks-into-spaces">http://unix.stackexchange.com/questions/164074/pasting-in-thunderbird-turns-line-breaks-into-spaces</a></p>

<p>After reading the link provided, I recall having come across the same post hours earlier when I was trying to find out more about the issue. A Google search with keywords including but not limited to <strong>xclip</strong> or <strong>newlines</strong>, or <strong>gmail</strong> or <strong>firefox</strong> would return as one of the first results, that specific post which appeared on the stackexchange network before any other post and more relevant results would showed up. Perhaps even those that were more important queries on the web were relegated, but I guess that’s an entirely different issue.</p>

<p>The answer that was accepted on the stackexchange network for that particular question did nothing to resolve the problem, and I guess it wasn’t until I came across the outstanding bugs on Firefox as I will show later, that the buried comment by a user name Volker Siegel was more relevant than I thought:</p>

<blockquote>
<p>Wow. I indeed was using html. Turning this off solved the problem. What could
be an explanation for that? – user2820379 Apr 28 ‘15 at 8:18</p>

<p>Explanation? “Thunderbird, a software that has evolved over more than a decade
to follow changes in protocols and UI expectations. Under these circumstances,
it is inevitable that the structure degrades - know as bit rot. In this
context, it is hard to introduce a new feature in conflict with the current
state, when solving the conflict is infeasible. A new UI feature like HTML
editing may need to be sneaked in between rotten skeletons of old protocol
layers. It will work nicely, but as a result, you will find the configuration
of the new feature down between these old rotten sediments.” – Volker Siegel
Apr 28 ‘15 at 15:30</p>
</blockquote>

<p>I wanted to get at the reasoning behind this fiasco and whether to blame neovim or gmail for it.
On vim: pasting worked under the Gmail’s interface, whereas with neovim the process just failed: newlines turned into whitespace.</p>

<p>The bug is one of those outstanding and hence unresolved that for years has plagued the Firefox browser and its counterpart such as Firebird:</p>

<p><img src="/images/firefox_bug_newlines.png" alt="Paste in content editable div from xclip removes newlines" /></p>

<p><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1049785" target="_blank">Paste in contentEditable div from xclip removes newlines</a></p>

<p>The above post made a reference to <a href="https://productforums.google.com/forum/#!msg/gmail/aV8bdPFiR24/3Owwd9rSaD0J" target="_blank">Gmail ignoring newlines on Copy/Paste</a> and the unhelpful answer of a user did nothing to pinpoint at the problem:</p>

<p><img src="/images/gmail_ignoring_newlines_copypaste.png" alt="gmail ignoring newlines" /></p>

<p>The ludicrous implementation of <code>\r</code> before <code>\n</code> is just nonsense.</p>

<p>And it also does not matter whether <code>printf</code> was used instead or a simple <code>echo</code>:</p>

<pre><code> $ echo -e 'una prueba\npara ver' | xclip -sel c 
</code></pre>

<p>or</p>

<pre><code> $ echo $'una prueba\npara ver' | xclip -sel c 
</code></pre>

<p>With <code>xsel</code> the flags are entirely different. But this clearly showed that Firefox is still trying to catch up with it. Gmail is not the problem. If it were I’d be more than happy to denote it. One could verify it by using a different email service such as Outlook from Microsoft for example.</p>

<p>A quick search related to Firefox turned out many more issues than what was originally intended, such as <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1174452" target="_blank">Copying text with the style “white-space: pre;” does not preserve white space (spaces, tabs, newlines)</a></p>

<p>On the above thread, an <a href="https://bug1174452.bmoattachments.org/attachment.cgi?id=8646518" target="_blank">attachment</a> provided can also be verified with <code>xclip</code>. It does not work under Firefox.</p>

<p>Another <a href="https://kb.iu.edu/d/bdkf">bug 116083</a> is still on the database for the Indiana University.</p>

<p><strong>References</strong></p>

<p><a href="https://specifications.freedesktop.org/clipboards-spec/clipboards-latest.txt" target="_blank">Clipboard specifications from freedesktop.org</a></p>


        
      </section>

      <footer class="page__meta">
        
        


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2017-05-20T13:58:18-05:00">May 20, 2017</time></p>
        
      </footer>

      

      
  <nav class="pagination">
    
      <a href="https://bindkey.github.io/gigabyte-motherboard-fails-to-load-live-cd-but-succeeds-with-flash-drive/" class="pagination--pager" title="Gigabyte Motherboard Fails to Load Live Cd but Succeeds With Flash Drive
">Previous</a>
    
    
      <a href="https://bindkey.github.io/gigabyte-computer-sleep-suspend-under-manjaro/" class="pagination--pager" title="Gigabyte Computer Sleep Suspend Under Manjaro
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://bindkey.github.io/antergos-chromium-segmentation-fault-input-output-error/" rel="permalink">Antergos chromium segmentation fault input output error
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  less than 1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">After an update from Antergos, chromium browser
had an infamous segmentation fault with its
core dumped enclosed between parentheses.

</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://bindkey.github.io/disabling-session-autostart-on-antergos-linux/" rel="permalink">Disabling autostart session on Antergos Linux
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  less than 1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">I’ve looked here at I don’t want programs restored after a reboot and over at xfce runs some apps twice at startup for an answer to the question, especially ...</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://bindkey.github.io/libzita-resampler-already-exists-in-filesystem/" rel="permalink">Libzita Resampler Already Exists In Filesystem
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  less than 1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">On the most recent upgrade for Arch, some file conflicts prevented the upgrades from going through.

</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://bindkey.github.io/antergos-keyboard-selection-during-installation/" rel="permalink">Antergos Keyboard Selection During Installation
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">One of the drawbacks during the installation of Antergos Linux was in identifying the keyboard layout option that was previously selected during the media in...</p>
  </article>
</div>
        
      </div>
    </div>
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><input type="text" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
    <div id="results" class="results"></div></div>
      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
    
    
    
    
    <li><a href="https://bindkey.github.io/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2018 Carlos. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="https://bindkey.github.io/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>




<script src="https://bindkey.github.io/assets/js/lunr/lunr.min.js"></script>
<script src="https://bindkey.github.io/assets/js/lunr/lunr-store.js"></script>
<script src="https://bindkey.github.io/assets/js/lunr/lunr-en.js"></script>





  </body>
</html>